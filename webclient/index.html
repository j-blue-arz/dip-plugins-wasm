<!DOCTYPE html>
<html lang="en-us">

<head>
    <link rel="icon" href="data:," />
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <style>
        .content {
            height: 100vh;
            width: 100vw;

            display: flex;
            flex-flow: column nowrap;
            gap: 10px;
        }

        input {
            font-family: inherit;
            font-size: 100%;
        }

        .buttons {
            display: flex;
            flex-flow: row wrap;
            gap: 10px;
        }

        .output {
            display: flex;
            flex-flow: row wrap;
            gap: 10px;
        }
    </style>
    <script src="wasm_exec.js"></script>
</head>

<body>
    <div class="content">
        <div class="buttons">
            <input type="button" id="compute" value="apply sobel" />
        </div>
        <div class="output">
            <img id="sourceImage" />
            <img id="targetImage" />
        </div>
    </div>
    <script>
        const sourceImage = document.getElementById("sourceImage");
        const targetImage = document.getElementById("targetImage");
        const computeButton = document.getElementById("compute");
        let input = null;

        initializeImage()

        computeButton.onclick = () => compute();

        function compute() {
        }

        function initializeImage() {
            const req = new XMLHttpRequest();
            req.open("GET", "/skyline.jpg", true);
            req.responseType = "blob";

            req.onload = async (event) => {
                const blob = req.response;
                if (blob) {
                    sourceImage.src = URL.createObjectURL(blob);
                    const arrayBuffer = await blob.arrayBuffer();
                    input = new Uint8Array(arrayBuffer);
                }
            };

            req.send(null);
        }
    </script>
</body>

</html>